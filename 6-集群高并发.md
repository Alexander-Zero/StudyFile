# 集群高并发

## 网络协议

四层通信模型

每一层都有不同的协议

应用层:　http,  ssh, smtp, 等

传输控制层：TCP , UDP

TCP: 三次握手 -> 数据传输 -> 四次分手, 最小粒度, 端点到端点的传输协议不能被打散

网络层：路由

链路层：

物理层：





每一层都有一张表,

网络层, 路由表, route -n 

下一跳, 每个主机不会存储所有的网络节点, 只会存距离为1的网络

路由判定, 按位与

网络层只解决下一跳





链路层: mack地址,  arp -a 



tcp/ip 基于吓一跳机制

ip,port是基于两端点

mack是基于节点间的, 每下一跳 换一个 mack , 包中是下一跳的地址





arp协议:　

刚开机:获取网关mac流程  　电脑发送gateway + mac(ffffff) -> 交换机广播 -> gateway响应 -> gateway发送 本机mac到主机 

arp包内容:  源ip + 源mac + 目标ip + 目标mac

 交换机????? : 同一网络, 无路由表

路由器  ： 不同网络 , 有路由表 



NAT :　网络地址转换协议

DR: 直接路由模式





